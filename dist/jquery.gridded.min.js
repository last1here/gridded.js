/*! gridded.js - v0.0.1 | Ashley Burgess */
!function(a){"use strict";var b={gutter:10,numOfCols:5,numOfRows:null,items:"",fadeIn:!1,fadeInSpeed:"slow",fadeInDelay:1e3,randomSize:!1,breakPoints:{mobile:480,tablet:780},fit:!0,widthAttr:"w",heightAttr:"h",onresize:null},c=function(c,d){var e=this;this.element=c,this.options=a.extend({},b,d),a.isPlainObject(this.element.data("gridded"))&&(this.options=a.extend({},this.options,this.element.data("gridded"))),this.getSizes(),this.options.randomSize&&this.setRandomSizes(),this.placeItems(),a(window).on("resize.gridded",a.proxy(this.resized,e))};c.prototype={constructor:c,items:function(){return this.element.children(this.options.items)},getSizes:function(){var b;if(this.options.row=this.options.col=null,this.options.numOfCols&&"object"==typeof this.options.numOfCols){for(b in this.options.breakPoints)if(a(window).width()<=this.options.breakPoints[b]){this.options.col=this.options.numOfCols[b];break}this.options.col||(this.options.col=this.options.numOfCols.desktop)}else this.options.col=this.options.numOfCols;if(this.options.numOfRows&&"object"==typeof this.options.numOfRows){for(b in this.options.breakPoints)if(a(window).width()<=this.options.breakPoints[b]){this.options.row=this.options.numOfRows[b];break}this.options.row||(this.options.row=this.options.numOfRows.desktop)}else this.options.row=this.options.numOfRows;return this.width=this.element.width()+this.options.gutter,this.colWidth=this.width/this.options.col,this},setRandomSizes:function(){var b=this;return this.items().each(function(){var c=a(this),d=Math.floor(Math.random()*Math.round(b.options.col/2)+1),e=Math.floor(Math.random()*((b.options.row||b.options.col)-1+1)+1);c.data(b.options.widthAttr)||c.data(b.options.heightAttr)||c.attr("data-"+b.options.widthAttr,d).attr("data-"+b.options.heightAttr,e)}),this},placeItems:function(){for(var b=this,c=1,d=0,e={},f=this.options.col-1;f>=0;f--)e[f]={};return this.element.css("position","relative"),this.items().hide().each(function(){var f,g,h=a(this),i=!1,j=0,k=h.data(b.options.widthAttr),l=h.data(b.options.heightAttr);for(k||(k=1),k>b.options.col&&b.options.fit!==!1&&(k=b.options.col),l||(l=k),b.options.row&&l>b.options.row&&b.options.fit!==!1&&(l=b.options.row),h.attr("data-"+b.options.widthAttr,k).attr("data-"+b.options.heightAttr,l);i===!1&&(!b.options.row||j<=b.options.row);){for(var m=0;m<=b.options.col-1;m++){for(var n=!0,o=0;k-1>=o;o++){if(f=m+o,!(f<b.options.col)){n=!1;break}for(var p=0;l-1>=p;p++)if(g=j+p,e[f][g]||b.options.row&&g>b.options.row-1){n=!1;break}}if(1==n){for(var q=k*b.colWidth-b.options.gutter,r=l*b.colWidth-b.options.gutter,s=m*b.colWidth+parseInt(b.element.css("padding-left")),t=j*b.colWidth+parseInt(b.element.css("padding-top")),o=0;k-1>=o;o++)for(var p=0;l-1>=p;p++)e[m+o][j+p]=1;h.attr("data-pr",m).attr("data-pd",j).attr("data-itemCount",c).css({position:"absolute",width:q,height:r,left:s,top:t}),b.options.fadeIn||h.show(),j+l>d&&(d=j+l),i=!0;break}}j+=1}c++}),this.options.fadeIn&&this.items().delay(this.options.fadeInDelay).fadeIn(this.options.fadeInSpeed),this.element.css("height",d*this.colWidth-this.options.gutter+parseInt(this.element.css("padding-top"))+parseInt(this.element.css("padding-bottom"))),this.grid=e,this},showGrid:function(){this.removeGrid();for(var b=a("<div style='border: 1px solid #333;'></div>").css({position:"absolute"}),c=a("<div class='line-container'></div>").appendTo(this.element).css({position:"absolute",top:0,bottom:0,left:0,right:0,"z-index":100}),d=0;d<=this.options.col;d++)b.clone().appendTo(c).css({height:"110%",top:"-5%",left:d*this.colWidth+this.options.gutter-1});for(var e=0;e<=this.options.row;e++)b.clone().appendTo(c).css({width:"100%",top:e*this.colWidth-this.options.gutter/2-1});return this},removeGrid:function(){return this.element.find(".line-container").remove(),this},resized:function(){var b=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){b.getSizes().placeItems(),b.element.find(".line-container").length>0&&b.showGrid(),a.isFunction(b.options.onresize)&&b.options.onresize(b)},200)}},a.fn.gridded=function(b){var d=a(this);return d.data("gridded")&&d.removeData("gridded"),d.data("gridded",new c(d,b)),this}}(window.jQuery);