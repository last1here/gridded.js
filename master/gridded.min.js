!function(t){"use strict";var i={gutter:10,numOfCols:5,items:".item",fadeIn:!1,randomSize:!0,breakPoints:{mobile:480,tablet:780}},s=function(s,o){var e=this;this.element=s,this.window=t(window),this.options=t.extend({},i,o),t.isPlainObject(this.element.data("gridded"))&&(this.options=t.extend({},this.options,this.element.data("gridded"))),this.getWidths(),this.options.randomSize&&this.setRandomWidths(),this.placeItems(),this.window.on("resize",function(){e.getWidths(),e.placeItems()})};s.prototype={constructor:s,getWidths:function(){this.options.col="object"==typeof this.options.numOfCols?this.window.width()<=this.options.breakPoints.mobile&&this.options.numOfCols.mobile?this.options.numOfCols.mobile:this.window.width()<=this.options.breakPoints.tablet&&this.options.numOfCols.tablet?this.options.numOfCols.tablet:this.options.numOfCols.desktop:this.options.numOfCols,this.width=this.element.width()+this.options.gutter,this.colWidth=this.width/this.options.col},setRandomWidths:function(){var i=this;console.log("rand"),this.element.find(this.options.items).each(function(){var s=t(this),o=Math.floor(Math.random()*(Math.round(i.options.col/2)-1+1)+1);s.data("w")||s.data("h")||(s.data("w",o),s.data("h",o))})},placeItems:function(){for(var i=this,s=1,o=0,e=new Array([]),a=this.options.col-1;a>=0;a--)e[a]=new Array;this.element.css("position","relative"),this.element.find(this.options.items).hide().each(function(){var a,n,d=t(this),h=!1,r=0;for(d.data("w")?d.data("w")>i.options.col&&d.data("w",i.options.col):d.data("w",1),d.data("h")||d.data("h",d.data("w"));0==h;){for(var p=0;p<=i.options.col-1;p++){for(var l=!0,c=0;c<=d.data("w")-1;c++){a=Number(p+c);for(var m=0;m<=d.data("h")-1&&(n=Number(r+m),a<i.options.col?null!=e[a][n]&&(l=!1):l=!1,0!=l);m++);if(0==l)break}if(1==l){for(var c=0;c<=d.data("w")-1;c++)for(var m=0;m<=d.data("h")-1;m++)e[Number(p+c)][Number(r+m)]=1;var f=d.data("w")*i.colWidth-i.options.gutter;f-=parseInt(d.css("border-left-width"))+parseInt(d.css("border-right-width"))+parseInt(d.css("padding-left"))+parseInt(d.css("padding-right"));var w=d.data("h")*i.colWidth-i.options.gutter;w-=parseInt(d.css("border-top-width"))+parseInt(d.css("border-bottom-width"))+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom")),d.data("pr",p).data("pd",r).data("data-ic",s),d.css("position","absolute").width(f).height(w).css("left",p*i.colWidth+parseInt(i.element.css("padding-left"))).css("top",r*i.colWidth+parseInt(i.element.css("padding-top"))),i.options.fadeIn?d.delay(1e3).fadeIn("slow"):d.show(),o<r+d.data("h")&&(o=r+Number(d.data("h"))),h=!0;break}}r+=1}s++}),this.element.css("height",o*this.colWidth-this.options.gutter+parseInt(this.element.css("padding-top"))+parseInt(this.element.css("padding-bottom"))),this.grid=e}},t.fn.gridded=function(i){var o=t(this);return o.data("gridded")&&o.removeData("gridded"),o.data("gridded",new s(o,i)),this}}(window.jQuery);