!function(t){"use strict";var s={gutter:10,col:5,items:".item",fadeIn:!1},e=function(e,i){var o=this;this.element=e,this.options=t.extend({},s,i),console.log(this.options),this.element.data("gridded")&&(this.options=t.extend({},this.options,this.element.data("gridded"))),console.log(this.options),this.setWidths(),this.placeItems(),t(window).on("resize",function(){o.setWidths()})};e.prototype={constructor:e,setWidths:function(){this.width=this.element.width()+this.options.gutter,this.colWidth=this.width/this.options.col},placeItems:function(){for(var s=this,e=1,i=0,o=new Array([]),a=this.options.col-1;a>=0;a--)o[a]=new Array;this.element.css("position","relative"),this.element.find(this.options.items).hide().each(function(){var a=t(this),d=!1,n=0;for(a.data("w")?a.data("w")>s.options.col&&a.data("w",s.options.col):a.data("w",1),a.data("h")||a.data("h",a.data("w"));0==d;){for(var r=0;r<=s.options.col-1;r++){for(var h=!0,p=0;p<=a.data("w")-1;p++){var c=Number(r+p),l=Number(n+p);if(c<s.options.col?null!=o[c][n]&&null!=o[r][l]&&(h=!1):h=!1,0==h)break}if(1==h){for(var p=0;p<=a.data("w")-1;p++)for(var g=0;g<=a.data("h")-1;g++)o[Number(r+p)][Number(n+g)]=1;var m=a.data("w")*s.colWidth-s.options.gutter;m-=parseInt(a.css("border-left-width"))+parseInt(a.css("border-right-width")),m-=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right"));var w=a.data("h")*s.colWidth-s.options.gutter;w-=parseInt(a.css("border-top-width"))+parseInt(a.css("border-bottom-width")),w-=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")),a.data("pr",r).data("pd",n).data("data-ic",e),a.css("position","absolute").width(m).height(w).css("left",r*s.colWidth+parseInt(s.element.css("padding-left"))).css("top",n*s.colWidth+parseInt(s.element.css("padding-top"))),s.options.fadeIn?a.delay(1e3).fadeIn("slow"):a.show(),i<n+a.data("h")&&(i=n+Number(a.data("h"))),d=!0;break}}n+=1}e++}),this.element.css("height",i*this.colWidth-this.options.gutter+parseInt(this.element.css("padding-top"))+parseInt(this.element.css("padding-bottom")))}},t.fn.gridded=function(s){var i=t(this);return i.data("gridded")&&i.removeData("gridded"),i.data("gridded",new e(i,s)),this}}(window.jQuery);