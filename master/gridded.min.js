!function(t){"use strict";var s={gutter:10,col:5,items:".item",fadeIn:!1},e=function(e,i){var a=this;this.element=e,this.options=t.extend({},s,i),t.isPlainObject(this.element.data("gridded"))&&(this.options=t.extend({},this.options,this.element.data("gridded"))),this.setWidths(),this.placeItems(),console.log(this),t(window).on("resize",function(){a.setWidths()})};e.prototype={constructor:e,setWidths:function(){this.width=this.element.width()+this.options.gutter,this.colWidth=this.width/this.options.col},placeItems:function(){for(var s=this,e=1,i=0,a=new Array([]),d=this.options.col-1;d>=0;d--)a[d]=new Array;this.element.css("position","relative"),this.element.find(this.options.items).hide().each(function(){var d,o,n=t(this),r=!1,h=0;for(n.data("w")?n.data("w")>s.options.col&&n.data("w",s.options.col):n.data("w",1),n.data("h")||n.data("h",n.data("w"));0==r;){for(var p=0;p<=s.options.col-1;p++){for(var c=!0,l=0;l<=n.data("w")-1;l++){d=Number(p+l);for(var f=0;f<=n.data("h")-1&&(o=Number(h+f),d<s.options.col?null!=a[d][o]&&(c=!1):c=!1,0!=c);f++);if(0==c)break}if(1==c){for(var l=0;l<=n.data("w")-1;l++)for(var f=0;f<=n.data("h")-1;f++)a[Number(p+l)][Number(h+f)]=1;var g=n.data("w")*s.colWidth-s.options.gutter;g-=parseInt(n.css("border-left-width"))+parseInt(n.css("border-right-width"))+parseInt(n.css("padding-left"))+parseInt(n.css("padding-right"));var m=n.data("h")*s.colWidth-s.options.gutter;m-=parseInt(n.css("border-top-width"))+parseInt(n.css("border-bottom-width"))+parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom")),n.data("pr",p).data("pd",h).data("data-ic",e),n.css("position","absolute").width(g).height(m).css("left",p*s.colWidth+parseInt(s.element.css("padding-left"))).css("top",h*s.colWidth+parseInt(s.element.css("padding-top"))),s.options.fadeIn?n.delay(1e3).fadeIn("slow"):n.show(),i<h+n.data("h")&&(i=h+Number(n.data("h"))),r=!0;break}}h+=1}e++}),this.element.css("height",i*this.colWidth-this.options.gutter+parseInt(this.element.css("padding-top"))+parseInt(this.element.css("padding-bottom"))),this.grid=a}},t.fn.gridded=function(s){var i=t(this);return i.data("gridded")&&i.removeData("gridded"),i.data("gridded",new e(i,s)),this}}(window.jQuery);