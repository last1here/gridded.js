!function(t){"use strict";var i={gutter:10,col:5,items:".item",fadeIn:!1,randomSize:!1},s=function(s,e){var a=this;this.element=s,this.options=t.extend({},i,e),t.isPlainObject(this.element.data("gridded"))&&(this.options=t.extend({},this.options,this.element.data("gridded"))),this.options.randomSize&&this.setRandomWidths(),this.getWidths(),this.placeItems(),t(window).on("resize",function(){a.getWidths()})};s.prototype={constructor:s,getWidths:function(){this.width=this.element.width()+this.options.gutter,this.colWidth=this.width/this.options.col},setRandomWidths:function(){var i=this;this.element.find(this.options.items).each(function(){var s=t(this),e=Math.round(i.options.col/2),a=Math.floor(Math.random()*(e-1+1)+1);s.data("w")||s.data("h")||(s.data("w",a),s.data("h",a))})},placeItems:function(){for(var i=this,s=1,e=0,a=new Array([]),o=this.options.col-1;o>=0;o--)a[o]=new Array;this.element.css("position","relative"),this.element.find(this.options.items).hide().each(function(){var o,d,n=t(this),r=!1,h=0;for(n.data("w")?n.data("w")>i.options.col&&n.data("w",i.options.col):n.data("w",1),n.data("h")||n.data("h",n.data("w"));0==r;){for(var p=0;p<=i.options.col-1;p++){for(var c=!0,l=0;l<=n.data("w")-1;l++){o=Number(p+l);for(var m=0;m<=n.data("h")-1&&(d=Number(h+m),o<i.options.col?null!=a[o][d]&&(c=!1):c=!1,0!=c);m++);if(0==c)break}if(1==c){for(var l=0;l<=n.data("w")-1;l++)for(var m=0;m<=n.data("h")-1;m++)a[Number(p+l)][Number(h+m)]=1;var f=n.data("w")*i.colWidth-i.options.gutter;f-=parseInt(n.css("border-left-width"))+parseInt(n.css("border-right-width"))+parseInt(n.css("padding-left"))+parseInt(n.css("padding-right"));var g=n.data("h")*i.colWidth-i.options.gutter;g-=parseInt(n.css("border-top-width"))+parseInt(n.css("border-bottom-width"))+parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom")),n.data("pr",p).data("pd",h).data("data-ic",s),n.css("position","absolute").width(f).height(g).css("left",p*i.colWidth+parseInt(i.element.css("padding-left"))).css("top",h*i.colWidth+parseInt(i.element.css("padding-top"))),i.options.fadeIn?n.delay(1e3).fadeIn("slow"):n.show(),e<h+n.data("h")&&(e=h+Number(n.data("h"))),r=!0;break}}h+=1}s++}),this.element.css("height",e*this.colWidth-this.options.gutter+parseInt(this.element.css("padding-top"))+parseInt(this.element.css("padding-bottom"))),this.grid=a}},t.fn.gridded=function(i){var e=t(this);return e.data("gridded")&&e.removeData("gridded"),e.data("gridded",new s(e,i)),this}}(window.jQuery);