/*
*The MIT License (MIT)
*
*Copyright (c) 2014 - Ashley Burgess
*
*Permission is hereby granted, free of charge, to any person obtaining a copy
*of this software and associated documentation files (the "Software"), to deal
*in the Software without restriction, including without limitation the rights
*to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
*copies of the Software, and to permit persons to whom the Software is
*furnished to do so, subject to the following conditions:
*
*The above copyright notice and this permission notice shall be included in all
*copies or substantial portions of the Software.
*
*THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
*IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
*FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
*AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
*LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
*OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
*SOFTWARE.
*/
!function(e){var i=function(i,s){this.element=i,this.setOptions(s),t=this,e(window).on("resize",function(){t.resized()})};i.prototype={constructor:i,setOptions:function(t){this.gutter=10,this.col=5,this.autoSimple=!1,this.items="item","number"==typeof this.element.data("gut")&&(this.gutter=this.element.data("gut")),"number"==typeof this.element.data("col")&&(this.col=this.element.data("col")),"boolean"==typeof this.element.data("auto")&&(this.autoSimple=this.element.data("auto")),"string"==typeof this.element.data("items")&&(this.items=this.element.data("items")),"object"==typeof t&&("number"==typeof t.gutter&&(this.gutter=t.gutter),"number"==typeof t.col&&(this.col=t.col),"boolean"==typeof t.auto&&(this.autoSimple=t.auto),"string"==typeof t.items&&(this.items=t.items)),this.setWidths()},resized:function(){this.setWidths()},setWidths:function(){this.width=this.element.width()-this.gutter,this.colWidth=this.width/this.col,this.autoSimple&&this.simpleAutoPlot(),this.setItemWidths()},setItemWidths:function(){var t=this;largestPushDown=0,this.element.css("position","relative"),this.element.find("."+this.items).each(function(){var i=e(this);i.css("position","absolute"),i.width(i.data("w")*t.colWidth-t.gutter),i.height(i.data("w")*t.colWidth-t.gutter),0==i.data("pr")?i.css("left",t.gutter):i.css("left",i.data("pr")*t.colWidth+t.gutter),0==i.data("pd")?i.css("top",t.gutter):i.css("top",i.data("pd")*t.colWidth+t.gutter),largestPushDown<i.data("pd")+i.data("w")&&(largestPushDown=Number(i.data("pd"))+Number(i.data("w")))}),console.log(largestPushDown),this.element.css("height",largestPushDown*this.colWidth+this.gutter)},simpleAutoPlot:function(){var t=this,i=0,s=0;this.element.find("."+this.items).each(function(){var o=e(this);o.data("w","1"),o.data("pr",i),o.data("pd",s),i++,i>t.col-1&&(i=0,s++)})},advancedAutoPlot:function(){this.element.find("."+this.items).each(function(){this.data("w")})}},e.fn.gridded=function(t){var s=e(this);return s.data("gridded")&&s.removeData("gridded"),s.data("gridded",new i(s,t)),this}}(window.jQuery);